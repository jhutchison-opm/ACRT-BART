import{d as Oe,o as Te,s as te,n as Fr,r as wr,e as Dr,z as Je,a as kr,j as m,b as Qe}from"./db.1tfSdgX3.js";import{R as M}from"./index.UCAuQZPX.js";var de=e=>e.type==="checkbox",ne=e=>e instanceof Date,R=e=>e==null;const lr=e=>typeof e=="object";var N=e=>!R(e)&&!Array.isArray(e)&&lr(e)&&!ne(e),Nr=e=>N(e)&&e.target?de(e.target)?e.target.checked:e.target.value:e,Sr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Er=(e,i)=>e.has(Sr(i)),jr=e=>{const i=e.constructor&&e.constructor.prototype;return N(i)&&i.hasOwnProperty("isPrototypeOf")},Le=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function U(e){let i;const s=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Le&&(e instanceof Blob||e instanceof FileList))&&(s||N(e)))if(i=s?[]:{},!s&&!jr(e))i=e;else for(const t in e)e.hasOwnProperty(t)&&(i[t]=U(e[t]));else return e;return i}var fe=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,y=(e,i,s)=>{if(!i||!N(e))return s;const t=fe(i.split(/[,[\].]+?/)).reduce((u,n)=>R(u)?u:u[n],e);return k(t)||t===e?k(e[i])?s:e[i]:t},J=e=>typeof e=="boolean";const Xe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},B={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},G={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};M.createContext(null);var Rr=(e,i,s,t=!0)=>{const u={defaultValues:i._defaultValues};for(const n in e)Object.defineProperty(u,n,{get:()=>{const o=n;return i._proxyFormState[o]!==B.all&&(i._proxyFormState[o]=!t||B.all),s&&(s[o]=!0),e[o]}});return u},C=e=>N(e)&&!Object.keys(e).length,Or=(e,i,s,t)=>{s(e);const{name:u,...n}=e;return C(n)||Object.keys(n).length>=Object.keys(i).length||Object.keys(n).find(o=>i[o]===(!t||B.all))},Ne=e=>Array.isArray(e)?e:[e];function Tr(e){const i=M.useRef(e);i.current=e,M.useEffect(()=>{const s=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var H=e=>typeof e=="string",Lr=(e,i,s,t,u)=>H(e)?(t&&i.watch.add(e),y(s,e,u)):Array.isArray(e)?e.map(n=>(t&&i.watch.add(n),y(s,n))):(t&&(i.watchAll=!0),s),Ue=e=>/^\w*$/.test(e),ur=e=>fe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),V=(e,i,s)=>{let t=-1;const u=Ue(i)?[i]:ur(i),n=u.length,o=n-1;for(;++t<n;){const g=u[t];let h=s;if(t!==o){const F=e[g];h=N(F)||Array.isArray(F)?F:isNaN(+u[t+1])?{}:[]}e[g]=h,e=e[g]}return e},or=(e,i,s,t,u)=>i?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[t]:u||!0}}:{},Ye=e=>({isOnSubmit:!e||e===B.onSubmit,isOnBlur:e===B.onBlur,isOnChange:e===B.onChange,isOnAll:e===B.all,isOnTouch:e===B.onTouched}),Ze=(e,i,s)=>!s&&(i.watchAll||i.watch.has(e)||[...i.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const ce=(e,i,s,t)=>{for(const u of s||Object.keys(e)){const n=y(e,u);if(n){const{_f:o,...g}=n;if(o){if(o.refs&&o.refs[0]&&i(o.refs[0],u)&&!t)break;if(o.ref&&i(o.ref,o.name)&&!t)break;ce(g,i)}else N(g)&&ce(g,i)}}};var Ur=(e,i,s)=>{const t=fe(y(e,s));return V(t,"root",i[s]),V(e,s,t),e},Ce=e=>e.type==="file",Y=e=>typeof e=="function",me=e=>{if(!Le)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},ve=e=>H(e),Me=e=>e.type==="radio",xe=e=>e instanceof RegExp;const er={value:!1,isValid:!1},rr={value:!0,isValid:!0};var cr=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?rr:{value:e[0].value,isValid:!0}:rr:er}return er};const tr={isValid:!1,value:null};var dr=e=>Array.isArray(e)?e.reduce((i,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:i,tr):tr;function sr(e,i,s="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||J(e)&&!e)return{type:s,message:ve(e)?e:"",ref:i}}var ae=e=>N(e)&&!xe(e)?e:{value:e,message:""},ir=async(e,i,s,t,u)=>{const{ref:n,refs:o,required:g,maxLength:h,minLength:F,min:P,max:w,pattern:x,validate:Q,name:T,valueAsNumber:ye,mount:_e,disabled:X}=e._f,p=y(i,T);if(!_e||X)return{};const W=o?o[0]:n,K=_=>{t&&W.reportValidity&&(W.setCustomValidity(J(_)?"":_||""),W.reportValidity())},S={},le=Me(n),se=de(n),Ve=le||se,I=(ye||Ce(n))&&k(n.value)&&k(p)||me(n)&&n.value===""||p===""||Array.isArray(p)&&!p.length,Z=or.bind(null,T,s,S),z=(_,b,D,O=G.maxLength,L=G.minLength)=>{const $=_?b:D;S[T]={type:_?O:L,message:$,ref:n,...Z(_?O:L,$)}};if(u?!Array.isArray(p)||!p.length:g&&(!Ve&&(I||R(p))||J(p)&&!p||se&&!cr(o).isValid||le&&!dr(o).isValid)){const{value:_,message:b}=ve(g)?{value:!!g,message:g}:ae(g);if(_&&(S[T]={type:G.required,message:b,ref:W,...Z(G.required,b)},!s))return K(b),S}if(!I&&(!R(P)||!R(w))){let _,b;const D=ae(w),O=ae(P);if(!R(p)&&!isNaN(p)){const L=n.valueAsNumber||p&&+p;R(D.value)||(_=L>D.value),R(O.value)||(b=L<O.value)}else{const L=n.valueAsDate||new Date(p),$=he=>new Date(new Date().toDateString()+" "+he),ee=n.type=="time",ue=n.type=="week";H(D.value)&&p&&(_=ee?$(p)>$(D.value):ue?p>D.value:L>new Date(D.value)),H(O.value)&&p&&(b=ee?$(p)<$(O.value):ue?p<O.value:L<new Date(O.value))}if((_||b)&&(z(!!_,D.message,O.message,G.max,G.min),!s))return K(S[T].message),S}if((h||F)&&!I&&(H(p)||u&&Array.isArray(p))){const _=ae(h),b=ae(F),D=!R(_.value)&&p.length>+_.value,O=!R(b.value)&&p.length<+b.value;if((D||O)&&(z(D,_.message,b.message),!s))return K(S[T].message),S}if(x&&!I&&H(p)){const{value:_,message:b}=ae(x);if(xe(_)&&!p.match(_)&&(S[T]={type:G.pattern,message:b,ref:n,...Z(G.pattern,b)},!s))return K(b),S}if(Q){if(Y(Q)){const _=await Q(p,i),b=sr(_,W);if(b&&(S[T]={...b,...Z(G.validate,b.message)},!s))return K(b.message),S}else if(N(Q)){let _={};for(const b in Q){if(!C(_)&&!s)break;const D=sr(await Q[b](p,i),W,b);D&&(_={...D,...Z(b,D.message)},K(D.message),s&&(S[T]=_))}if(!C(_)&&(S[T]={ref:W,..._},!s))return S}}return K(!0),S};function Cr(e,i){const s=i.slice(0,-1).length;let t=0;for(;t<s;)e=k(e)?t++:e[i[t++]];return e}function Mr(e){for(const i in e)if(e.hasOwnProperty(i)&&!k(e[i]))return!1;return!0}function j(e,i){const s=Array.isArray(i)?i:Ue(i)?[i]:ur(i),t=s.length===1?e:Cr(e,s),u=s.length-1,n=s[u];return t&&delete t[n],u!==0&&(N(t)&&C(t)||Array.isArray(t)&&Mr(t))&&j(e,s.slice(0,-1)),e}var Se=()=>{let e=[];return{get observers(){return e},next:u=>{for(const n of e)n.next&&n.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(n=>n!==u)}}),unsubscribe:()=>{e=[]}}},be=e=>R(e)||!lr(e);function re(e,i){if(be(e)||be(i))return e===i;if(ne(e)&&ne(i))return e.getTime()===i.getTime();const s=Object.keys(e),t=Object.keys(i);if(s.length!==t.length)return!1;for(const u of s){const n=e[u];if(!t.includes(u))return!1;if(u!=="ref"){const o=i[u];if(ne(n)&&ne(o)||N(n)&&N(o)||Array.isArray(n)&&Array.isArray(o)?!re(n,o):n!==o)return!1}}return!0}var fr=e=>e.type==="select-multiple",Br=e=>Me(e)||de(e),Ee=e=>me(e)&&e.isConnected,yr=e=>{for(const i in e)if(Y(e[i]))return!0;return!1};function pe(e,i={}){const s=Array.isArray(e);if(N(e)||s)for(const t in e)Array.isArray(e[t])||N(e[t])&&!yr(e[t])?(i[t]=Array.isArray(e[t])?[]:{},pe(e[t],i[t])):R(e[t])||(i[t]=!0);return i}function hr(e,i,s){const t=Array.isArray(e);if(N(e)||t)for(const u in e)Array.isArray(e[u])||N(e[u])&&!yr(e[u])?k(i)||be(s[u])?s[u]=Array.isArray(e[u])?pe(e[u],[]):{...pe(e[u])}:hr(e[u],R(i)?{}:i[u],s[u]):s[u]=!re(e[u],i[u]);return s}var je=(e,i)=>hr(e,i,pe(i)),gr=(e,{valueAsNumber:i,valueAsDate:s,setValueAs:t})=>k(e)?e:i?e===""?NaN:e&&+e:s&&H(e)?new Date(e):t?t(e):e;function Re(e){const i=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):i.disabled))return Ce(i)?i.files:Me(i)?dr(e.refs).value:fr(i)?[...i.selectedOptions].map(({value:s})=>s):de(i)?cr(e.refs).value:gr(k(i.value)?e.ref.value:i.value,e)}var Pr=(e,i,s,t)=>{const u={};for(const n of e){const o=y(i,n);o&&V(u,n,o._f)}return{criteriaMode:s,names:[...e],fields:u,shouldUseNativeValidation:t}},oe=e=>k(e)?e:xe(e)?e.source:N(e)?xe(e.value)?e.value.source:e.value:e,Ir=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function ar(e,i,s){const t=y(e,s);if(t||Ue(s))return{error:t,name:s};const u=s.split(".");for(;u.length;){const n=u.join("."),o=y(i,n),g=y(e,n);if(o&&!Array.isArray(o)&&s!==n)return{name:s};if(g&&g.type)return{name:n,error:g};u.pop()}return{name:s}}var $r=(e,i,s,t,u)=>u.isOnAll?!1:!s&&u.isOnTouch?!(i||e):(s?t.isOnBlur:u.isOnBlur)?!e:(s?t.isOnChange:u.isOnChange)?e:!0,qr=(e,i)=>!fe(y(e,i)).length&&j(e,i);const Hr={mode:B.onSubmit,reValidateMode:B.onChange,shouldFocusError:!0};function Wr(e={},i){let s={...Hr,...e},t={submitCount:0,isDirty:!1,isLoading:Y(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:s.errors||{},disabled:s.disabled||!1},u={},n=N(s.defaultValues)||N(s.values)?U(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:U(n),g={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},F,P=0;const w={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:Se(),array:Se(),state:Se()},Q=Ye(s.mode),T=Ye(s.reValidateMode),ye=s.criteriaMode===B.all,_e=r=>a=>{clearTimeout(P),P=setTimeout(r,a)},X=async r=>{if(w.isValid||r){const a=s.resolver?C((await I()).errors):await z(u,!0);a!==t.isValid&&x.state.next({isValid:a})}},p=r=>w.isValidating&&x.state.next({isValidating:r}),W=(r,a=[],l,f,d=!0,c=!0)=>{if(f&&l){if(g.action=!0,c&&Array.isArray(y(u,r))){const v=l(y(u,r),f.argA,f.argB);d&&V(u,r,v)}if(c&&Array.isArray(y(t.errors,r))){const v=l(y(t.errors,r),f.argA,f.argB);d&&V(t.errors,r,v),qr(t.errors,r)}if(w.touchedFields&&c&&Array.isArray(y(t.touchedFields,r))){const v=l(y(t.touchedFields,r),f.argA,f.argB);d&&V(t.touchedFields,r,v)}w.dirtyFields&&(t.dirtyFields=je(n,o)),x.state.next({name:r,isDirty:b(r,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else V(o,r,a)},K=(r,a)=>{V(t.errors,r,a),x.state.next({errors:t.errors})},S=r=>{t.errors=r,x.state.next({errors:t.errors,isValid:!1})},le=(r,a,l,f)=>{const d=y(u,r);if(d){const c=y(o,r,k(l)?y(n,r):l);k(c)||f&&f.defaultChecked||a?V(o,r,a?c:Re(d._f)):L(r,c),g.mount&&X()}},se=(r,a,l,f,d)=>{let c=!1,v=!1;const A={name:r},E=!!(y(u,r)&&y(u,r)._f.disabled);if(!l||f){w.isDirty&&(v=t.isDirty,t.isDirty=A.isDirty=b(),c=v!==A.isDirty);const q=E||re(y(n,r),a);v=!!(!E&&y(t.dirtyFields,r)),q||E?j(t.dirtyFields,r):V(t.dirtyFields,r,!0),A.dirtyFields=t.dirtyFields,c=c||w.dirtyFields&&v!==!q}if(l){const q=y(t.touchedFields,r);q||(V(t.touchedFields,r,l),A.touchedFields=t.touchedFields,c=c||w.touchedFields&&q!==l)}return c&&d&&x.state.next(A),c?A:{}},Ve=(r,a,l,f)=>{const d=y(t.errors,r),c=w.isValid&&J(a)&&t.isValid!==a;if(e.delayError&&l?(F=_e(()=>K(r,l)),F(e.delayError)):(clearTimeout(P),F=null,l?V(t.errors,r,l):j(t.errors,r)),(l?!re(d,l):d)||!C(f)||c){const v={...f,...c&&J(a)?{isValid:a}:{},errors:t.errors,name:r};t={...t,...v},x.state.next(v)}p(!1)},I=async r=>s.resolver(o,s.context,Pr(r||h.mount,u,s.criteriaMode,s.shouldUseNativeValidation)),Z=async r=>{const{errors:a}=await I(r);if(r)for(const l of r){const f=y(a,l);f?V(t.errors,l,f):j(t.errors,l)}else t.errors=a;return a},z=async(r,a,l={valid:!0})=>{for(const f in r){const d=r[f];if(d){const{_f:c,...v}=d;if(c){const A=h.array.has(c.name),E=await ir(d,o,ye,s.shouldUseNativeValidation&&!a,A);if(E[c.name]&&(l.valid=!1,a))break;!a&&(y(E,c.name)?A?Ur(t.errors,E,c.name):V(t.errors,c.name,E[c.name]):j(t.errors,c.name))}v&&await z(v,a,l)}}return l.valid},_=()=>{for(const r of h.unMount){const a=y(u,r);a&&(a._f.refs?a._f.refs.every(l=>!Ee(l)):!Ee(a._f.ref))&&Fe(r)}h.unMount=new Set},b=(r,a)=>(r&&a&&V(o,r,a),!re(Be(),n)),D=(r,a,l)=>Lr(r,h,{...g.mount?o:k(a)?n:H(r)?{[r]:a}:a},l,a),O=r=>fe(y(g.mount?o:n,r,e.shouldUnregister?y(n,r,[]):[])),L=(r,a,l={})=>{const f=y(u,r);let d=a;if(f){const c=f._f;c&&(!c.disabled&&V(o,r,gr(a,c)),d=me(c.ref)&&R(a)?"":a,fr(c.ref)?[...c.ref.options].forEach(v=>v.selected=d.includes(v.value)):c.refs?de(c.ref)?c.refs.length>1?c.refs.forEach(v=>(!v.defaultChecked||!v.disabled)&&(v.checked=Array.isArray(d)?!!d.find(A=>A===v.value):d===v.value)):c.refs[0]&&(c.refs[0].checked=!!d):c.refs.forEach(v=>v.checked=v.value===d):Ce(c.ref)?c.ref.value="":(c.ref.value=d,c.ref.type||x.values.next({name:r,values:{...o}})))}(l.shouldDirty||l.shouldTouch)&&se(r,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&Ae(r)},$=(r,a,l)=>{for(const f in a){const d=a[f],c=`${r}.${f}`,v=y(u,c);(h.array.has(r)||!be(d)||v&&!v._f)&&!ne(d)?$(c,d,l):L(c,d,l)}},ee=(r,a,l={})=>{const f=y(u,r),d=h.array.has(r),c=U(a);V(o,r,c),d?(x.array.next({name:r,values:{...o}}),(w.isDirty||w.dirtyFields)&&l.shouldDirty&&x.state.next({name:r,dirtyFields:je(n,o),isDirty:b(r,c)})):f&&!f._f&&!R(c)?$(r,c,l):L(r,c,l),Ze(r,h)&&x.state.next({...t}),x.values.next({name:r,values:{...o}}),!g.mount&&i()},ue=async r=>{const a=r.target;let l=a.name,f=!0;const d=y(u,l),c=()=>a.type?Re(d._f):Nr(r),v=A=>{f=Number.isNaN(A)||A===y(o,l,A)};if(d){let A,E;const q=c(),ie=r.type===Xe.BLUR||r.type===Xe.FOCUS_OUT,_r=!Ir(d._f)&&!s.resolver&&!y(t.errors,l)&&!d._f.deps||$r(ie,y(t.touchedFields,l),t.isSubmitted,T,Q),De=Ze(l,h,ie);V(o,l,q),ie?(d._f.onBlur&&d._f.onBlur(r),F&&F(0)):d._f.onChange&&d._f.onChange(r);const ke=se(l,q,ie,!1),Vr=!C(ke)||De;if(!ie&&x.values.next({name:l,type:r.type,values:{...o}}),_r)return w.isValid&&X(),Vr&&x.state.next({name:l,...De?{}:ke});if(!ie&&De&&x.state.next({...t}),p(!0),s.resolver){const{errors:ze}=await I([l]);if(v(q),f){const Ar=ar(t.errors,u,l),Ge=ar(ze,u,Ar.name||l);A=Ge.error,l=Ge.name,E=C(ze)}}else A=(await ir(d,o,ye,s.shouldUseNativeValidation))[l],v(q),f&&(A?E=!1:w.isValid&&(E=await z(u,!0)));f&&(d._f.deps&&Ae(d._f.deps),Ve(l,E,A,ke))}},he=(r,a)=>{if(y(t.errors,a)&&r.focus)return r.focus(),1},Ae=async(r,a={})=>{let l,f;const d=Ne(r);if(p(!0),s.resolver){const c=await Z(k(r)?r:d);l=C(c),f=r?!d.some(v=>y(c,v)):l}else r?(f=(await Promise.all(d.map(async c=>{const v=y(u,c);return await z(v&&v._f?{[c]:v}:v)}))).every(Boolean),!(!f&&!t.isValid)&&X()):f=l=await z(u);return x.state.next({...!H(r)||w.isValid&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors,isValidating:!1}),a.shouldFocus&&!f&&ce(u,he,r?d:h.mount),f},Be=r=>{const a={...n,...g.mount?o:{}};return k(r)?a:H(r)?y(a,r):r.map(l=>y(a,l))},Pe=(r,a)=>({invalid:!!y((a||t).errors,r),isDirty:!!y((a||t).dirtyFields,r),isTouched:!!y((a||t).touchedFields,r),error:y((a||t).errors,r)}),mr=r=>{r&&Ne(r).forEach(a=>j(t.errors,a)),x.state.next({errors:r?t.errors:{}})},Ie=(r,a,l)=>{const f=(y(u,r,{_f:{}})._f||{}).ref;V(t.errors,r,{...a,ref:f}),x.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&f&&f.focus&&f.focus()},xr=(r,a)=>Y(r)?x.values.subscribe({next:l=>r(D(void 0,a),l)}):D(r,a,!0),Fe=(r,a={})=>{for(const l of r?Ne(r):h.mount)h.mount.delete(l),h.array.delete(l),a.keepValue||(j(u,l),j(o,l)),!a.keepError&&j(t.errors,l),!a.keepDirty&&j(t.dirtyFields,l),!a.keepTouched&&j(t.touchedFields,l),!s.shouldUnregister&&!a.keepDefaultValue&&j(n,l);x.values.next({values:{...o}}),x.state.next({...t,...a.keepDirty?{isDirty:b()}:{}}),!a.keepIsValid&&X()},$e=({disabled:r,name:a,field:l,fields:f,value:d})=>{if(J(r)){const c=r?void 0:k(d)?Re(l?l._f:y(f,a)._f):d;V(o,a,c),se(a,c,!1,!1,!0)}},we=(r,a={})=>{let l=y(u,r);const f=J(a.disabled);return V(u,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...a}}),h.mount.add(r),l?$e({field:l,disabled:a.disabled,name:r,value:a.value}):le(r,!0,a.value),{...f?{disabled:a.disabled}:{},...s.progressive?{required:!!a.required,min:oe(a.min),max:oe(a.max),minLength:oe(a.minLength),maxLength:oe(a.maxLength),pattern:oe(a.pattern)}:{},name:r,onChange:ue,onBlur:ue,ref:d=>{if(d){we(r,a),l=y(u,r);const c=k(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,v=Br(c),A=l._f.refs||[];if(v?A.find(E=>E===c):c===l._f.ref)return;V(u,r,{_f:{...l._f,...v?{refs:[...A.filter(Ee),c,...Array.isArray(y(n,r))?[{}]:[]],ref:{type:c.type,name:r}}:{ref:c}}}),le(r,!1,void 0,c)}else l=y(u,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(Er(h.array,r)&&g.action)&&h.unMount.add(r)}}},qe=()=>s.shouldFocusError&&ce(u,he,h.mount),br=r=>{J(r)&&(x.state.next({disabled:r}),ce(u,(a,l)=>{let f=r;const d=y(u,l);d&&J(d._f.disabled)&&(f||(f=d._f.disabled)),a.disabled=f},0,!1))},He=(r,a)=>async l=>{l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=U(o);if(x.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:c}=await I();t.errors=d,f=c}else await z(u);j(t.errors,"root"),C(t.errors)?(x.state.next({errors:{}}),await r(f,l)):(a&&await a({...t.errors},l),qe(),setTimeout(qe)),x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:C(t.errors),submitCount:t.submitCount+1,errors:t.errors})},pr=(r,a={})=>{y(u,r)&&(k(a.defaultValue)?ee(r,U(y(n,r))):(ee(r,a.defaultValue),V(n,r,U(a.defaultValue))),a.keepTouched||j(t.touchedFields,r),a.keepDirty||(j(t.dirtyFields,r),t.isDirty=a.defaultValue?b(r,U(y(n,r))):b()),a.keepError||(j(t.errors,r),w.isValid&&X()),x.state.next({...t}))},We=(r,a={})=>{const l=r?U(r):n,f=U(l),d=r&&!C(r)?f:n;if(a.keepDefaultValues||(n=l),!a.keepValues){if(a.keepDirtyValues)for(const c of h.mount)y(t.dirtyFields,c)?V(d,c,y(o,c)):ee(c,y(d,c));else{if(Le&&k(r))for(const c of h.mount){const v=y(u,c);if(v&&v._f){const A=Array.isArray(v._f.refs)?v._f.refs[0]:v._f.ref;if(me(A)){const E=A.closest("form");if(E){E.reset();break}}}}u={}}o=e.shouldUnregister?a.keepDefaultValues?U(n):{}:U(d),x.array.next({values:{...d}}),x.values.next({values:{...d}})}h={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!g.mount&&i(),g.mount=!w.isValid||!!a.keepIsValid,g.watch=!!e.shouldUnregister,x.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!re(r,n)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:a.keepDirtyValues?t.dirtyFields:a.keepDefaultValues&&r?je(n,r):{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ke=(r,a)=>We(Y(r)?r(o):r,a);return{control:{register:we,unregister:Fe,getFieldState:Pe,handleSubmit:He,setError:Ie,_executeSchema:I,_getWatch:D,_getDirty:b,_updateValid:X,_removeUnmounted:_,_updateFieldArray:W,_updateDisabledField:$e,_getFieldArray:O,_reset:We,_resetDefaultValues:()=>Y(s.defaultValues)&&s.defaultValues().then(r=>{Ke(r,s.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:r=>{t={...t,...r}},_disableForm:br,_subjects:x,_proxyFormState:w,_setErrors:S,get _fields(){return u},get _formValues(){return o},get _state(){return g},set _state(r){g=r},get _defaultValues(){return n},get _names(){return h},set _names(r){h=r},get _formState(){return t},set _formState(r){t=r},get _options(){return s},set _options(r){s={...s,...r}}},trigger:Ae,register:we,handleSubmit:He,watch:xr,setValue:ee,getValues:Be,reset:Ke,resetField:pr,clearErrors:mr,unregister:Fe,setError:Ie,setFocus:(r,a={})=>{const l=y(u,r),f=l&&l._f;if(f){const d=f.refs?f.refs[0]:f.ref;d.focus&&(d.focus(),a.shouldSelect&&d.select())}},getFieldState:Pe}}function Kr(e={}){const i=M.useRef(),s=M.useRef(),[t,u]=M.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...Wr(e,()=>u(o=>({...o}))),formState:t});const n=i.current.control;return n._options=e,Tr({subject:n._subjects.state,next:o=>{Or(o,n._proxyFormState,n._updateFormState,!0)&&u({...n._formState})}}),M.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),M.useEffect(()=>{if(n._proxyFormState.isDirty){const o=n._getDirty();o!==t.isDirty&&n._subjects.state.next({isDirty:o})}},[n,t.isDirty]),M.useEffect(()=>{e.values&&!re(e.values,s.current)?(n._reset(e.values,n._options.resetOptions),s.current=e.values,u(o=>({...o}))):n._resetDefaultValues()},[e.values,n]),M.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),M.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),i.current.formState=Rr(t,n),i.current}var nr=function(e,i,s){if(e&&"reportValidity"in e){var t=y(s,i);e.setCustomValidity(t&&t.message||""),e.reportValidity()}},vr=function(e,i){var s=function(u){var n=i.fields[u];n&&n.ref&&"reportValidity"in n.ref?nr(n.ref,u,e):n.refs&&n.refs.forEach(function(o){return nr(o,u,e)})};for(var t in i.fields)s(t)},zr=function(e,i){i.shouldUseNativeValidation&&vr(e,i);var s={};for(var t in e){var u=y(i.fields,t),n=Object.assign(e[t]||{},{ref:u&&u.ref});if(Gr(i.names||Object.keys(e),t)){var o=Object.assign({},y(s,t));V(o,"root",n),V(s,t,o)}else V(s,t,n)}return s},Gr=function(e,i){return e.some(function(s){return s.startsWith(i+".")})},Jr=function(e,i){for(var s={};e.length;){var t=e[0],u=t.code,n=t.message,o=t.path.join(".");if(!s[o])if("unionErrors"in t){var g=t.unionErrors[0].errors[0];s[o]={message:g.message,type:g.code}}else s[o]={message:n,type:u};if("unionErrors"in t&&t.unionErrors.forEach(function(P){return P.errors.forEach(function(w){return e.push(w)})}),i){var h=s[o].types,F=h&&h[t.code];s[o]=or(o,i,s,u,F?[].concat(F,t.message):t.message)}e.shift()}return s},Qr=function(e,i,s){return s===void 0&&(s={}),function(t,u,n){try{return Promise.resolve(function(o,g){try{var h=Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](t,i)).then(function(F){return n.shouldUseNativeValidation&&vr({},n),{errors:{},values:s.raw?t:F}})}catch(F){return g(F)}return h&&h.then?h.then(void 0,g):h}(0,function(o){if(function(g){return g.errors!=null}(o))return{values:{},errors:zr(Jr(o.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw o}))}catch(o){return Promise.reject(o)}}};Oe({type:"content",schema:Te({title:te().min(1),description:te().optional()})});Oe({type:"content",schema:Te({title:te().min(1),description:te().optional(),order:Fr()})});const Xr=["pass","fail","dna"],ge={pass:"Pass",fail:"Fail",dna:"Does Not Apply"};Oe({type:"data",schema:Te({group:wr("testCaseGroups"),id:te().min(1),description:te(),link:te().url(),expectedResult:Dr(Xr)})});const Yr=Je.object({results:Je.array(kr)});function it({fields:e}){const i=async()=>{const g=await Qe.testResultData.toArray();return e.map(h=>g?.find(P=>P.testId===h.data.id)||{id:void 0,testId:h.data.id,testName:"",testResult:"",testComment:""})},{register:s,handleSubmit:t,getValues:u}=Kr({mode:"onBlur",resolver:Qr(Yr),defaultValues:async()=>({results:await i()})}),n=g=>{const h=u(`results.${g}`);Qe.testResultData.put(h,h.id)},o=[];return Object.entries(ge).forEach(([g,h])=>{o.push({value:g,label:h})}),m.jsx("form",{onSubmit:t(g=>console.log({data:g})),children:m.jsx("div",{className:"display-flex flex-column",style:{gap:"12px"},children:e.map((g,h)=>m.jsxs("div",{className:"grid-row",children:[m.jsx("div",{className:"grid-col-12",children:m.jsxs("div",{children:[m.jsxs("div",{className:"margin-bottom-4",children:[m.jsx("h2",{id:g.data.id.replace(" ","-"),className:"margin-bottom-1 font-heading-lg",children:m.jsx("a",{className:"text-black text-no-underline hover:text-underline",href:`#${g.data.id.replace(" ","-")}`,children:g.data.id})}),m.jsx("p",{className:"margin-top-1",children:m.jsxs("a",{className:"usa-link usa-link--external",href:g.data.link,target:"_blank",children:["Understanding ",g.data.id," "]})})]}),m.jsxs("dl",{children:[m.jsx("dt",{className:"text-bold margin-bottom-1",children:"Description"}),m.jsx("dd",{className:"margin-left-0",children:m.jsx("p",{className:"margin-top-0",children:g.data.description})}),m.jsx("dt",{className:"text-bold margin-bottom-1",children:"Expected Results"}),m.jsx("dd",{className:"margin-left-0",children:g.data.expectedResult==="pass"?m.jsxs("div",{className:"display-inline-flex padding-1 bg-green text-white radius-md",children:[m.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:m.jsx("use",{xlinkHref:"/assets/img/sprite.svg#check_circle_outline"})}),m.jsx("span",{className:"text-bold",children:ge.pass})]}):g.data.expectedResult==="fail"?m.jsxs("div",{className:"display-inline-flex padding-1 bg-secondary-darker text-white radius-md",children:[m.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:m.jsx("use",{xlinkHref:"/assets/img/sprite.svg#highlight_off"})}),m.jsx("span",{className:"text-bold",children:ge.fail})]}):g.data.expectedResult==="dna"?m.jsxs("div",{className:"display-inline-flex padding-1 bg-base-light text-black radius-md",children:[m.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:m.jsx("use",{xlinkHref:"/assets/img/sprite.svg#do_not_disturb"})}),m.jsx("span",{className:"text-bold",children:ge.dna})]}):null})]}),m.jsxs("div",{className:"display-flex flex-column",style:{gap:"12px"},children:[m.jsxs("div",{children:[m.jsx("label",{className:"usa-label",htmlFor:`testName-${h}`,children:"Test Process Name/ID"}),m.jsx("input",{className:"usa-input",id:`testName-${h}`,type:"text",...s(`results.${h}.testName`,{required:!0,onBlur:()=>n(h)})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"usa-label",htmlFor:`testResult-${h}`,children:"Test Result"}),m.jsxs("select",{className:"usa-select",id:`testResult-${h}`,...s(`results.${h}.testResult`,{required:!0,onChange:()=>n(h)}),children:[m.jsx("option",{selected:!0,value:"",children:"-- Select a Result --"}),o.map(F=>m.jsx("option",{value:F.value,children:F.label}))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"usa-label",htmlFor:`testComment-${h}`,children:"Comment"}),m.jsx("textarea",{className:"usa-textarea",id:`testComment-${h}`,rows:4,...s(`results.${h}.testComment`,{required:!0,onBlur:()=>n(h)})})]})]})]})}),m.jsx("div",{className:"grid-col-12",children:m.jsx("div",{className:"padding-top-5",children:m.jsx("hr",{className:"border-top-1px border-solid border-base-lighter"})})})]},h))})})}export{it as default};
