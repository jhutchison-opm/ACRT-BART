import{z as w,d as Te,o as Le,s as se,n as Ft,r as wt,e as Dt,j as v,a as Qe}from"./db.VxxEr_Es.js";import{R as B}from"./index.UCAuQZPX.js";var fe=e=>e.type==="checkbox",le=e=>e instanceof Date,O=e=>e==null;const lt=e=>typeof e=="object";var E=e=>!O(e)&&!Array.isArray(e)&&lt(e)&&!le(e),Nt=e=>E(e)&&e.target?fe(e.target)?e.target.checked:e.target.value:e,kt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Et=(e,i)=>e.has(kt(i)),St=e=>{const i=e.constructor&&e.constructor.prototype;return E(i)&&i.hasOwnProperty("isPrototypeOf")},Ue=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function C(e){let i;const s=Array.isArray(e);if(e instanceof Date)i=new Date(e);else if(e instanceof Set)i=new Set(e);else if(!(Ue&&(e instanceof Blob||e instanceof FileList))&&(s||E(e)))if(i=s?[]:{},!s&&!St(e))i=e;else for(const r in e)e.hasOwnProperty(r)&&(i[r]=C(e[r]));else return e;return i}var ye=e=>Array.isArray(e)?e.filter(Boolean):[],k=e=>e===void 0,y=(e,i,s)=>{if(!i||!E(e))return s;const r=ye(i.split(/[,[\].]+?/)).reduce((u,n)=>O(u)?u:u[n],e);return k(r)||r===e?k(e[i])?s:e[i]:r},Q=e=>typeof e=="boolean";const Xe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},I={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};B.createContext(null);var jt=(e,i,s,r=!0)=>{const u={defaultValues:i._defaultValues};for(const n in e)Object.defineProperty(u,n,{get:()=>{const o=n;return i._proxyFormState[o]!==I.all&&(i._proxyFormState[o]=!r||I.all),s&&(s[o]=!0),e[o]}});return u},M=e=>E(e)&&!Object.keys(e).length,Rt=(e,i,s,r)=>{s(e);const{name:u,...n}=e;return M(n)||Object.keys(n).length>=Object.keys(i).length||Object.keys(n).find(o=>i[o]===(!r||I.all))},Ee=e=>Array.isArray(e)?e:[e];function Ot(e){const i=B.useRef(e);i.current=e,B.useEffect(()=>{const s=!e.disabled&&i.current.subject&&i.current.subject.subscribe({next:i.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var W=e=>typeof e=="string",Tt=(e,i,s,r,u)=>W(e)?(r&&i.watch.add(e),y(s,e,u)):Array.isArray(e)?e.map(n=>(r&&i.watch.add(n),y(s,n))):(r&&(i.watchAll=!0),s),Ce=e=>/^\w*$/.test(e),ut=e=>ye(e.replace(/["|']|\]/g,"").split(/\.|\[/)),V=(e,i,s)=>{let r=-1;const u=Ce(i)?[i]:ut(i),n=u.length,o=n-1;for(;++r<n;){const g=u[r];let h=s;if(r!==o){const F=e[g];h=E(F)||Array.isArray(F)?F:isNaN(+u[r+1])?{}:[]}e[g]=h,e=e[g]}return e},ot=(e,i,s,r,u)=>i?{...s[e],types:{...s[e]&&s[e].types?s[e].types:{},[r]:u||!0}}:{},Ye=e=>({isOnSubmit:!e||e===I.onSubmit,isOnBlur:e===I.onBlur,isOnChange:e===I.onChange,isOnAll:e===I.all,isOnTouch:e===I.onTouched}),Ze=(e,i,s)=>!s&&(i.watchAll||i.watch.has(e)||[...i.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const de=(e,i,s,r)=>{for(const u of s||Object.keys(e)){const n=y(e,u);if(n){const{_f:o,...g}=n;if(o){if(o.refs&&o.refs[0]&&i(o.refs[0],u)&&!r)break;if(o.ref&&i(o.ref,o.name)&&!r)break;de(g,i)}else E(g)&&de(g,i)}}};var Lt=(e,i,s)=>{const r=ye(y(e,s));return V(r,"root",i[s]),V(e,s,r),e},Me=e=>e.type==="file",Z=e=>typeof e=="function",xe=e=>{if(!Ue)return!1;const i=e?e.ownerDocument:0;return e instanceof(i&&i.defaultView?i.defaultView.HTMLElement:HTMLElement)},ve=e=>W(e),Be=e=>e.type==="radio",be=e=>e instanceof RegExp;const et={value:!1,isValid:!1},tt={value:!0,isValid:!0};var ct=e=>{if(Array.isArray(e)){if(e.length>1){const i=e.filter(s=>s&&s.checked&&!s.disabled).map(s=>s.value);return{value:i,isValid:!!i.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!k(e[0].attributes.value)?k(e[0].value)||e[0].value===""?tt:{value:e[0].value,isValid:!0}:tt:et}return et};const rt={isValid:!1,value:null};var dt=e=>Array.isArray(e)?e.reduce((i,s)=>s&&s.checked&&!s.disabled?{isValid:!0,value:s.value}:i,rt):rt;function st(e,i,s="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||Q(e)&&!e)return{type:s,message:ve(e)?e:"",ref:i}}var ne=e=>E(e)&&!be(e)?e:{value:e,message:""},it=async(e,i,s,r,u)=>{const{ref:n,refs:o,required:g,maxLength:h,minLength:F,min:P,max:D,pattern:x,validate:X,name:L,valueAsNumber:he,mount:Ve,disabled:Y}=e._f,p=y(i,L);if(!Ve||Y)return{};const K=o?o[0]:n,z=_=>{r&&K.reportValidity&&(K.setCustomValidity(Q(_)?"":_||""),K.reportValidity())},S={},ue=Be(n),ie=fe(n),Ae=ue||ie,$=(he||Me(n))&&k(n.value)&&k(p)||xe(n)&&n.value===""||p===""||Array.isArray(p)&&!p.length,ee=ot.bind(null,L,s,S),G=(_,b,N,T=J.maxLength,U=J.minLength)=>{const q=_?b:N;S[L]={type:_?T:U,message:q,ref:n,...ee(_?T:U,q)}};if(u?!Array.isArray(p)||!p.length:g&&(!Ae&&($||O(p))||Q(p)&&!p||ie&&!ct(o).isValid||ue&&!dt(o).isValid)){const{value:_,message:b}=ve(g)?{value:!!g,message:g}:ne(g);if(_&&(S[L]={type:J.required,message:b,ref:K,...ee(J.required,b)},!s))return z(b),S}if(!$&&(!O(P)||!O(D))){let _,b;const N=ne(D),T=ne(P);if(!O(p)&&!isNaN(p)){const U=n.valueAsNumber||p&&+p;O(N.value)||(_=U>N.value),O(T.value)||(b=U<T.value)}else{const U=n.valueAsDate||new Date(p),q=ge=>new Date(new Date().toDateString()+" "+ge),te=n.type=="time",oe=n.type=="week";W(N.value)&&p&&(_=te?q(p)>q(N.value):oe?p>N.value:U>new Date(N.value)),W(T.value)&&p&&(b=te?q(p)<q(T.value):oe?p<T.value:U<new Date(T.value))}if((_||b)&&(G(!!_,N.message,T.message,J.max,J.min),!s))return z(S[L].message),S}if((h||F)&&!$&&(W(p)||u&&Array.isArray(p))){const _=ne(h),b=ne(F),N=!O(_.value)&&p.length>+_.value,T=!O(b.value)&&p.length<+b.value;if((N||T)&&(G(N,_.message,b.message),!s))return z(S[L].message),S}if(x&&!$&&W(p)){const{value:_,message:b}=ne(x);if(be(_)&&!p.match(_)&&(S[L]={type:J.pattern,message:b,ref:n,...ee(J.pattern,b)},!s))return z(b),S}if(X){if(Z(X)){const _=await X(p,i),b=st(_,K);if(b&&(S[L]={...b,...ee(J.validate,b.message)},!s))return z(b.message),S}else if(E(X)){let _={};for(const b in X){if(!M(_)&&!s)break;const N=st(await X[b](p,i),K,b);N&&(_={...N,...ee(b,N.message)},z(N.message),s&&(S[L]=_))}if(!M(_)&&(S[L]={ref:K,..._},!s))return S}}return z(!0),S};function Ut(e,i){const s=i.slice(0,-1).length;let r=0;for(;r<s;)e=k(e)?r++:e[i[r++]];return e}function Ct(e){for(const i in e)if(e.hasOwnProperty(i)&&!k(e[i]))return!1;return!0}function R(e,i){const s=Array.isArray(i)?i:Ce(i)?[i]:ut(i),r=s.length===1?e:Ut(e,s),u=s.length-1,n=s[u];return r&&delete r[n],u!==0&&(E(r)&&M(r)||Array.isArray(r)&&Ct(r))&&R(e,s.slice(0,-1)),e}var Se=()=>{let e=[];return{get observers(){return e},next:u=>{for(const n of e)n.next&&n.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(n=>n!==u)}}),unsubscribe:()=>{e=[]}}},pe=e=>O(e)||!lt(e);function re(e,i){if(pe(e)||pe(i))return e===i;if(le(e)&&le(i))return e.getTime()===i.getTime();const s=Object.keys(e),r=Object.keys(i);if(s.length!==r.length)return!1;for(const u of s){const n=e[u];if(!r.includes(u))return!1;if(u!=="ref"){const o=i[u];if(le(n)&&le(o)||E(n)&&E(o)||Array.isArray(n)&&Array.isArray(o)?!re(n,o):n!==o)return!1}}return!0}var ft=e=>e.type==="select-multiple",Mt=e=>Be(e)||fe(e),je=e=>xe(e)&&e.isConnected,yt=e=>{for(const i in e)if(Z(e[i]))return!0;return!1};function _e(e,i={}){const s=Array.isArray(e);if(E(e)||s)for(const r in e)Array.isArray(e[r])||E(e[r])&&!yt(e[r])?(i[r]=Array.isArray(e[r])?[]:{},_e(e[r],i[r])):O(e[r])||(i[r]=!0);return i}function ht(e,i,s){const r=Array.isArray(e);if(E(e)||r)for(const u in e)Array.isArray(e[u])||E(e[u])&&!yt(e[u])?k(i)||pe(s[u])?s[u]=Array.isArray(e[u])?_e(e[u],[]):{..._e(e[u])}:ht(e[u],O(i)?{}:i[u],s[u]):s[u]=!re(e[u],i[u]);return s}var Re=(e,i)=>ht(e,i,_e(i)),gt=(e,{valueAsNumber:i,valueAsDate:s,setValueAs:r})=>k(e)?e:i?e===""?NaN:e&&+e:s&&W(e)?new Date(e):r?r(e):e;function Oe(e){const i=e.ref;if(!(e.refs?e.refs.every(s=>s.disabled):i.disabled))return Me(i)?i.files:Be(i)?dt(e.refs).value:ft(i)?[...i.selectedOptions].map(({value:s})=>s):fe(i)?ct(e.refs).value:gt(k(i.value)?e.ref.value:i.value,e)}var Bt=(e,i,s,r)=>{const u={};for(const n of e){const o=y(i,n);o&&V(u,n,o._f)}return{criteriaMode:s,names:[...e],fields:u,shouldUseNativeValidation:r}},ce=e=>k(e)?e:be(e)?e.source:E(e)?be(e.value)?e.value.source:e.value:e,It=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function at(e,i,s){const r=y(e,s);if(r||Ce(s))return{error:r,name:s};const u=s.split(".");for(;u.length;){const n=u.join("."),o=y(i,n),g=y(e,n);if(o&&!Array.isArray(o)&&s!==n)return{name:s};if(g&&g.type)return{name:n,error:g};u.pop()}return{name:s}}var Pt=(e,i,s,r,u)=>u.isOnAll?!1:!s&&u.isOnTouch?!(i||e):(s?r.isOnBlur:u.isOnBlur)?!e:(s?r.isOnChange:u.isOnChange)?e:!0,$t=(e,i)=>!ye(y(e,i)).length&&R(e,i);const qt={mode:I.onSubmit,reValidateMode:I.onChange,shouldFocusError:!0};function Ht(e={},i){let s={...qt,...e},r={submitCount:0,isDirty:!1,isLoading:Z(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:s.errors||{},disabled:s.disabled||!1},u={},n=E(s.defaultValues)||E(s.values)?C(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:C(n),g={action:!1,mount:!1,watch:!1},h={mount:new Set,unMount:new Set,array:new Set,watch:new Set},F,P=0;const D={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:Se(),array:Se(),state:Se()},X=Ye(s.mode),L=Ye(s.reValidateMode),he=s.criteriaMode===I.all,Ve=t=>a=>{clearTimeout(P),P=setTimeout(t,a)},Y=async t=>{if(D.isValid||t){const a=s.resolver?M((await $()).errors):await G(u,!0);a!==r.isValid&&x.state.next({isValid:a})}},p=t=>D.isValidating&&x.state.next({isValidating:t}),K=(t,a=[],l,f,d=!0,c=!0)=>{if(f&&l){if(g.action=!0,c&&Array.isArray(y(u,t))){const m=l(y(u,t),f.argA,f.argB);d&&V(u,t,m)}if(c&&Array.isArray(y(r.errors,t))){const m=l(y(r.errors,t),f.argA,f.argB);d&&V(r.errors,t,m),$t(r.errors,t)}if(D.touchedFields&&c&&Array.isArray(y(r.touchedFields,t))){const m=l(y(r.touchedFields,t),f.argA,f.argB);d&&V(r.touchedFields,t,m)}D.dirtyFields&&(r.dirtyFields=Re(n,o)),x.state.next({name:t,isDirty:b(t,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else V(o,t,a)},z=(t,a)=>{V(r.errors,t,a),x.state.next({errors:r.errors})},S=t=>{r.errors=t,x.state.next({errors:r.errors,isValid:!1})},ue=(t,a,l,f)=>{const d=y(u,t);if(d){const c=y(o,t,k(l)?y(n,t):l);k(c)||f&&f.defaultChecked||a?V(o,t,a?c:Oe(d._f)):U(t,c),g.mount&&Y()}},ie=(t,a,l,f,d)=>{let c=!1,m=!1;const A={name:t},j=!!(y(u,t)&&y(u,t)._f.disabled);if(!l||f){D.isDirty&&(m=r.isDirty,r.isDirty=A.isDirty=b(),c=m!==A.isDirty);const H=j||re(y(n,t),a);m=!!(!j&&y(r.dirtyFields,t)),H||j?R(r.dirtyFields,t):V(r.dirtyFields,t,!0),A.dirtyFields=r.dirtyFields,c=c||D.dirtyFields&&m!==!H}if(l){const H=y(r.touchedFields,t);H||(V(r.touchedFields,t,l),A.touchedFields=r.touchedFields,c=c||D.touchedFields&&H!==l)}return c&&d&&x.state.next(A),c?A:{}},Ae=(t,a,l,f)=>{const d=y(r.errors,t),c=D.isValid&&Q(a)&&r.isValid!==a;if(e.delayError&&l?(F=Ve(()=>z(t,l)),F(e.delayError)):(clearTimeout(P),F=null,l?V(r.errors,t,l):R(r.errors,t)),(l?!re(d,l):d)||!M(f)||c){const m={...f,...c&&Q(a)?{isValid:a}:{},errors:r.errors,name:t};r={...r,...m},x.state.next(m)}p(!1)},$=async t=>s.resolver(o,s.context,Bt(t||h.mount,u,s.criteriaMode,s.shouldUseNativeValidation)),ee=async t=>{const{errors:a}=await $(t);if(t)for(const l of t){const f=y(a,l);f?V(r.errors,l,f):R(r.errors,l)}else r.errors=a;return a},G=async(t,a,l={valid:!0})=>{for(const f in t){const d=t[f];if(d){const{_f:c,...m}=d;if(c){const A=h.array.has(c.name),j=await it(d,o,he,s.shouldUseNativeValidation&&!a,A);if(j[c.name]&&(l.valid=!1,a))break;!a&&(y(j,c.name)?A?Lt(r.errors,j,c.name):V(r.errors,c.name,j[c.name]):R(r.errors,c.name))}m&&await G(m,a,l)}}return l.valid},_=()=>{for(const t of h.unMount){const a=y(u,t);a&&(a._f.refs?a._f.refs.every(l=>!je(l)):!je(a._f.ref))&&we(t)}h.unMount=new Set},b=(t,a)=>(t&&a&&V(o,t,a),!re(Ie(),n)),N=(t,a,l)=>Tt(t,h,{...g.mount?o:k(a)?n:W(t)?{[t]:a}:a},l,a),T=t=>ye(y(g.mount?o:n,t,e.shouldUnregister?y(n,t,[]):[])),U=(t,a,l={})=>{const f=y(u,t);let d=a;if(f){const c=f._f;c&&(!c.disabled&&V(o,t,gt(a,c)),d=xe(c.ref)&&O(a)?"":a,ft(c.ref)?[...c.ref.options].forEach(m=>m.selected=d.includes(m.value)):c.refs?fe(c.ref)?c.refs.length>1?c.refs.forEach(m=>(!m.defaultChecked||!m.disabled)&&(m.checked=Array.isArray(d)?!!d.find(A=>A===m.value):d===m.value)):c.refs[0]&&(c.refs[0].checked=!!d):c.refs.forEach(m=>m.checked=m.value===d):Me(c.ref)?c.ref.value="":(c.ref.value=d,c.ref.type||x.values.next({name:t,values:{...o}})))}(l.shouldDirty||l.shouldTouch)&&ie(t,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&Fe(t)},q=(t,a,l)=>{for(const f in a){const d=a[f],c=`${t}.${f}`,m=y(u,c);(h.array.has(t)||!pe(d)||m&&!m._f)&&!le(d)?q(c,d,l):U(c,d,l)}},te=(t,a,l={})=>{const f=y(u,t),d=h.array.has(t),c=C(a);V(o,t,c),d?(x.array.next({name:t,values:{...o}}),(D.isDirty||D.dirtyFields)&&l.shouldDirty&&x.state.next({name:t,dirtyFields:Re(n,o),isDirty:b(t,c)})):f&&!f._f&&!O(c)?q(t,c,l):U(t,c,l),Ze(t,h)&&x.state.next({...r}),x.values.next({name:t,values:{...o}}),!g.mount&&i()},oe=async t=>{const a=t.target;let l=a.name,f=!0;const d=y(u,l),c=()=>a.type?Oe(d._f):Nt(t),m=A=>{f=Number.isNaN(A)||A===y(o,l,A)};if(d){let A,j;const H=c(),ae=t.type===Xe.BLUR||t.type===Xe.FOCUS_OUT,_t=!It(d._f)&&!s.resolver&&!y(r.errors,l)&&!d._f.deps||Pt(ae,y(r.touchedFields,l),r.isSubmitted,L,X),Ne=Ze(l,h,ae);V(o,l,H),ae?(d._f.onBlur&&d._f.onBlur(t),F&&F(0)):d._f.onChange&&d._f.onChange(t);const ke=ie(l,H,ae,!1),Vt=!M(ke)||Ne;if(!ae&&x.values.next({name:l,type:t.type,values:{...o}}),_t)return D.isValid&&Y(),Vt&&x.state.next({name:l,...Ne?{}:ke});if(!ae&&Ne&&x.state.next({...r}),p(!0),s.resolver){const{errors:Ge}=await $([l]);if(m(H),f){const At=at(r.errors,u,l),Je=at(Ge,u,At.name||l);A=Je.error,l=Je.name,j=M(Ge)}}else A=(await it(d,o,he,s.shouldUseNativeValidation))[l],m(H),f&&(A?j=!1:D.isValid&&(j=await G(u,!0)));f&&(d._f.deps&&Fe(d._f.deps),Ae(l,j,A,ke))}},ge=(t,a)=>{if(y(r.errors,a)&&t.focus)return t.focus(),1},Fe=async(t,a={})=>{let l,f;const d=Ee(t);if(p(!0),s.resolver){const c=await ee(k(t)?t:d);l=M(c),f=t?!d.some(m=>y(c,m)):l}else t?(f=(await Promise.all(d.map(async c=>{const m=y(u,c);return await G(m&&m._f?{[c]:m}:m)}))).every(Boolean),!(!f&&!r.isValid)&&Y()):f=l=await G(u);return x.state.next({...!W(t)||D.isValid&&l!==r.isValid?{}:{name:t},...s.resolver||!t?{isValid:l}:{},errors:r.errors,isValidating:!1}),a.shouldFocus&&!f&&de(u,ge,t?d:h.mount),f},Ie=t=>{const a={...n,...g.mount?o:{}};return k(t)?a:W(t)?y(a,t):t.map(l=>y(a,l))},Pe=(t,a)=>({invalid:!!y((a||r).errors,t),isDirty:!!y((a||r).dirtyFields,t),isTouched:!!y((a||r).touchedFields,t),error:y((a||r).errors,t)}),vt=t=>{t&&Ee(t).forEach(a=>R(r.errors,a)),x.state.next({errors:t?r.errors:{}})},$e=(t,a,l)=>{const f=(y(u,t,{_f:{}})._f||{}).ref;V(r.errors,t,{...a,ref:f}),x.state.next({name:t,errors:r.errors,isValid:!1}),l&&l.shouldFocus&&f&&f.focus&&f.focus()},xt=(t,a)=>Z(t)?x.values.subscribe({next:l=>t(N(void 0,a),l)}):N(t,a,!0),we=(t,a={})=>{for(const l of t?Ee(t):h.mount)h.mount.delete(l),h.array.delete(l),a.keepValue||(R(u,l),R(o,l)),!a.keepError&&R(r.errors,l),!a.keepDirty&&R(r.dirtyFields,l),!a.keepTouched&&R(r.touchedFields,l),!s.shouldUnregister&&!a.keepDefaultValue&&R(n,l);x.values.next({values:{...o}}),x.state.next({...r,...a.keepDirty?{isDirty:b()}:{}}),!a.keepIsValid&&Y()},qe=({disabled:t,name:a,field:l,fields:f,value:d})=>{if(Q(t)){const c=t?void 0:k(d)?Oe(l?l._f:y(f,a)._f):d;V(o,a,c),ie(a,c,!1,!1,!0)}},De=(t,a={})=>{let l=y(u,t);const f=Q(a.disabled);return V(u,t,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:t}},name:t,mount:!0,...a}}),h.mount.add(t),l?qe({field:l,disabled:a.disabled,name:t,value:a.value}):ue(t,!0,a.value),{...f?{disabled:a.disabled}:{},...s.progressive?{required:!!a.required,min:ce(a.min),max:ce(a.max),minLength:ce(a.minLength),maxLength:ce(a.maxLength),pattern:ce(a.pattern)}:{},name:t,onChange:oe,onBlur:oe,ref:d=>{if(d){De(t,a),l=y(u,t);const c=k(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,m=Mt(c),A=l._f.refs||[];if(m?A.find(j=>j===c):c===l._f.ref)return;V(u,t,{_f:{...l._f,...m?{refs:[...A.filter(je),c,...Array.isArray(y(n,t))?[{}]:[]],ref:{type:c.type,name:t}}:{ref:c}}}),ue(t,!1,void 0,c)}else l=y(u,t,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(Et(h.array,t)&&g.action)&&h.unMount.add(t)}}},He=()=>s.shouldFocusError&&de(u,ge,h.mount),bt=t=>{Q(t)&&(x.state.next({disabled:t}),de(u,(a,l)=>{let f=t;const d=y(u,l);d&&Q(d._f.disabled)&&(f||(f=d._f.disabled)),a.disabled=f},0,!1))},We=(t,a)=>async l=>{l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=C(o);if(x.state.next({isSubmitting:!0}),s.resolver){const{errors:d,values:c}=await $();r.errors=d,f=c}else await G(u);R(r.errors,"root"),M(r.errors)?(x.state.next({errors:{}}),await t(f,l)):(a&&await a({...r.errors},l),He(),setTimeout(He)),x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:M(r.errors),submitCount:r.submitCount+1,errors:r.errors})},pt=(t,a={})=>{y(u,t)&&(k(a.defaultValue)?te(t,C(y(n,t))):(te(t,a.defaultValue),V(n,t,C(a.defaultValue))),a.keepTouched||R(r.touchedFields,t),a.keepDirty||(R(r.dirtyFields,t),r.isDirty=a.defaultValue?b(t,C(y(n,t))):b()),a.keepError||(R(r.errors,t),D.isValid&&Y()),x.state.next({...r}))},Ke=(t,a={})=>{const l=t?C(t):n,f=C(l),d=t&&!M(t)?f:n;if(a.keepDefaultValues||(n=l),!a.keepValues){if(a.keepDirtyValues)for(const c of h.mount)y(r.dirtyFields,c)?V(d,c,y(o,c)):te(c,y(d,c));else{if(Ue&&k(t))for(const c of h.mount){const m=y(u,c);if(m&&m._f){const A=Array.isArray(m._f.refs)?m._f.refs[0]:m._f.ref;if(xe(A)){const j=A.closest("form");if(j){j.reset();break}}}}u={}}o=e.shouldUnregister?a.keepDefaultValues?C(n):{}:C(d),x.array.next({values:{...d}}),x.values.next({values:{...d}})}h={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!g.mount&&i(),g.mount=!D.isValid||!!a.keepIsValid,g.watch=!!e.shouldUnregister,x.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!re(t,n)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:a.keepDirtyValues?r.dirtyFields:a.keepDefaultValues&&t?Re(n,t):{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},ze=(t,a)=>Ke(Z(t)?t(o):t,a);return{control:{register:De,unregister:we,getFieldState:Pe,handleSubmit:We,setError:$e,_executeSchema:$,_getWatch:N,_getDirty:b,_updateValid:Y,_removeUnmounted:_,_updateFieldArray:K,_updateDisabledField:qe,_getFieldArray:T,_reset:Ke,_resetDefaultValues:()=>Z(s.defaultValues)&&s.defaultValues().then(t=>{ze(t,s.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:t=>{r={...r,...t}},_disableForm:bt,_subjects:x,_proxyFormState:D,_setErrors:S,get _fields(){return u},get _formValues(){return o},get _state(){return g},set _state(t){g=t},get _defaultValues(){return n},get _names(){return h},set _names(t){h=t},get _formState(){return r},set _formState(t){r=t},get _options(){return s},set _options(t){s={...s,...t}}},trigger:Fe,register:De,handleSubmit:We,watch:xt,setValue:te,getValues:Ie,reset:ze,resetField:pt,clearErrors:vt,unregister:we,setError:$e,setFocus:(t,a={})=>{const l=y(u,t),f=l&&l._f;if(f){const d=f.refs?f.refs[0]:f.ref;d.focus&&(d.focus(),a.shouldSelect&&d.select())}},getFieldState:Pe}}function Wt(e={}){const i=B.useRef(),s=B.useRef(),[r,u]=B.useState({isDirty:!1,isValidating:!1,isLoading:Z(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Z(e.defaultValues)?void 0:e.defaultValues});i.current||(i.current={...Ht(e,()=>u(o=>({...o}))),formState:r});const n=i.current.control;return n._options=e,Ot({subject:n._subjects.state,next:o=>{Rt(o,n._proxyFormState,n._updateFormState,!0)&&u({...n._formState})}}),B.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),B.useEffect(()=>{if(n._proxyFormState.isDirty){const o=n._getDirty();o!==r.isDirty&&n._subjects.state.next({isDirty:o})}},[n,r.isDirty]),B.useEffect(()=>{e.values&&!re(e.values,s.current)?(n._reset(e.values,n._options.resetOptions),s.current=e.values,u(o=>({...o}))):n._resetDefaultValues()},[e.values,n]),B.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),B.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),i.current.formState=jt(r,n),i.current}const Kt=["Automated Only","Manual Only","Hybrid (Automated and Manual)"];w.object({processName:w.string().max(50),productName:w.string().max(50),processVersion:w.string().max(50),processType:w.enum(Kt),productUrl:w.string().url().max(150),processDesc:w.string().max(1e3),notes:w.string().max(1e3).optional()});w.object({agencyName:w.string().max(100),submitterFirstName:w.string().max(50),submitterLastName:w.string().max(50),submitterRole:w.string().max(100).optional(),submitterEmail:w.string().email(),submitterNotes:w.string().max(1e3)});const zt=w.object({id:w.number().optional(),testId:w.string(),testName:w.string(),testResult:w.string(),testComment:w.string()});var nt=function(e,i,s){if(e&&"reportValidity"in e){var r=y(s,i);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},mt=function(e,i){var s=function(u){var n=i.fields[u];n&&n.ref&&"reportValidity"in n.ref?nt(n.ref,u,e):n.refs&&n.refs.forEach(function(o){return nt(o,u,e)})};for(var r in i.fields)s(r)},Gt=function(e,i){i.shouldUseNativeValidation&&mt(e,i);var s={};for(var r in e){var u=y(i.fields,r),n=Object.assign(e[r]||{},{ref:u&&u.ref});if(Jt(i.names||Object.keys(e),r)){var o=Object.assign({},y(s,r));V(o,"root",n),V(s,r,o)}else V(s,r,n)}return s},Jt=function(e,i){return e.some(function(s){return s.startsWith(i+".")})},Qt=function(e,i){for(var s={};e.length;){var r=e[0],u=r.code,n=r.message,o=r.path.join(".");if(!s[o])if("unionErrors"in r){var g=r.unionErrors[0].errors[0];s[o]={message:g.message,type:g.code}}else s[o]={message:n,type:u};if("unionErrors"in r&&r.unionErrors.forEach(function(P){return P.errors.forEach(function(D){return e.push(D)})}),i){var h=s[o].types,F=h&&h[r.code];s[o]=ot(o,i,s,u,F?[].concat(F,r.message):r.message)}e.shift()}return s},Xt=function(e,i,s){return s===void 0&&(s={}),function(r,u,n){try{return Promise.resolve(function(o,g){try{var h=Promise.resolve(e[s.mode==="sync"?"parse":"parseAsync"](r,i)).then(function(F){return n.shouldUseNativeValidation&&mt({},n),{errors:{},values:s.raw?r:F}})}catch(F){return g(F)}return h&&h.then?h.then(void 0,g):h}(0,function(o){if(function(g){return g.errors!=null}(o))return{values:{},errors:Gt(Qt(o.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw o}))}catch(o){return Promise.reject(o)}}};Te({type:"content",schema:Le({title:se().min(1),description:se().optional()})});Te({type:"content",schema:Le({title:se().min(1),description:se().optional(),order:Ft()})});const Yt=["pass","fail","dna"],me={pass:"Pass",fail:"Fail",dna:"Does Not Apply"};Te({type:"data",schema:Le({group:wt("testCaseGroups"),id:se().min(1),description:se(),link:se().url(),expectedResult:Dt(Yt)})});const Zt=w.object({results:w.array(zt)});function ar({fields:e}){const i=async()=>{const g=await Qe.testResultData.toArray();return e.map(h=>g?.find(P=>P.testId===h.data.id)||{id:void 0,testId:h.data.id,testName:"",testResult:"",testComment:""})},{register:s,handleSubmit:r,getValues:u}=Wt({mode:"onBlur",resolver:Xt(Zt),defaultValues:async()=>({results:await i()})}),n=g=>{const h=u(`results.${g}`);Qe.testResultData.put(h,h.id)},o=[];return Object.entries(me).forEach(([g,h])=>{o.push({value:g,label:h})}),v.jsx("form",{onSubmit:r(g=>console.log({data:g})),children:v.jsx("div",{className:"display-flex flex-column",style:{gap:"12px"},children:e.map((g,h)=>v.jsxs("div",{className:"grid-row",children:[v.jsx("div",{className:"grid-col-12",children:v.jsxs("div",{children:[v.jsxs("div",{className:"margin-bottom-4",children:[v.jsx("h2",{id:g.data.id.replace(" ","-"),className:"margin-bottom-1 font-heading-lg",children:v.jsx("a",{className:"text-black text-no-underline hover:text-underline",href:`#${g.data.id.replace(" ","-")}`,children:g.data.id})}),v.jsx("p",{className:"margin-top-1",children:v.jsxs("a",{className:"usa-link usa-link--external",href:g.data.link,target:"_blank",children:["Understanding ",g.data.id," "]})})]}),v.jsxs("dl",{children:[v.jsx("dt",{className:"text-bold margin-bottom-1",children:"Description"}),v.jsx("dd",{className:"margin-left-0",children:v.jsx("p",{className:"margin-top-0",children:g.data.description})}),v.jsx("dt",{className:"text-bold margin-bottom-1",children:"Expected Results"}),v.jsx("dd",{className:"margin-left-0",children:g.data.expectedResult==="pass"?v.jsxs("div",{className:"display-inline-flex padding-1 bg-green text-white radius-md",children:[v.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:v.jsx("use",{xlinkHref:"/assets/img/sprite.svg#check_circle_outline"})}),v.jsx("span",{className:"text-bold",children:me.pass})]}):g.data.expectedResult==="fail"?v.jsxs("div",{className:"display-inline-flex padding-1 bg-secondary-darker text-white radius-md",children:[v.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:v.jsx("use",{xlinkHref:"/assets/img/sprite.svg#highlight_off"})}),v.jsx("span",{className:"text-bold",children:me.fail})]}):g.data.expectedResult==="dna"?v.jsxs("div",{className:"display-inline-flex padding-1 bg-base-light text-black radius-md",children:[v.jsx("svg",{className:"usa-icon","aria-hidden":"true",focusable:"false",role:"img",children:v.jsx("use",{xlinkHref:"/assets/img/sprite.svg#do_not_disturb"})}),v.jsx("span",{className:"text-bold",children:me.dna})]}):null})]}),v.jsxs("div",{className:"display-flex flex-column",style:{gap:"12px"},children:[v.jsxs("div",{children:[v.jsx("label",{className:"usa-label",htmlFor:`testName-${h}`,children:"Test Process Name/ID"}),v.jsx("input",{className:"usa-input",id:`testName-${h}`,type:"text",...s(`results.${h}.testName`,{required:!0,onBlur:()=>n(h)})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"usa-label",htmlFor:`testResult-${h}`,children:"Test Result"}),v.jsxs("select",{className:"usa-select",id:`testResult-${h}`,...s(`results.${h}.testResult`,{required:!0,onChange:()=>n(h)}),children:[v.jsx("option",{selected:!0,value:"",children:"-- Select a Result --"}),o.map(F=>v.jsx("option",{value:F.value,children:F.label}))]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"usa-label",htmlFor:`testComment-${h}`,children:"Comment"}),v.jsx("textarea",{className:"usa-textarea",id:`testComment-${h}`,rows:4,...s(`results.${h}.testComment`,{required:!0,onBlur:()=>n(h)})})]})]})]})}),v.jsx("div",{className:"grid-col-12",children:v.jsx("div",{className:"padding-top-5",children:v.jsx("hr",{className:"border-top-1px border-solid border-base-lighter"})})})]},h))})})}export{ar as default};
