import{t as v,g as p,j as a,a as m}from"./db.VxxEr_Es.js";import{R as c,r as g}from"./index.UCAuQZPX.js";function b(n,u,l){var r,e;typeof n=="function"?(r=u||[],e=l):(r=[],e=u);var s=c.useRef({hasResult:!1,result:e,error:null}),d=c.useReducer(function(t){return t+1},0);d[0];var f=d[1],h=c.useMemo(function(){var t=typeof n=="function"?n():n;if(!t||typeof t.subscribe!="function")throw n===t?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!s.current.hasResult&&typeof window<"u"&&(typeof t.hasValue!="function"||t.hasValue()))if(typeof t.getValue=="function")s.current.result=t.getValue(),s.current.hasResult=!0;else{var o=t.subscribe(function(i){s.current.result=i,s.current.hasResult=!0});typeof o=="function"?o():o.unsubscribe()}return t},r);if(c.useDebugValue(s.current.result),c.useEffect(function(){var t=h.subscribe(function(o){var i=s.current;(i.error!==null||i.result!==o)&&(i.error=null,i.result=o,i.hasResult=!0,f())},function(o){var i=s.current;i.error!==o&&(i.error=o,f())});return typeof t=="function"?t:t.unsubscribe.bind(t)},r),s.current.error)throw s.current.error;return s.current.result}function x(n,u,l){return b(function(){return v(n)},u||[],l)}const j=await p("testCaseGroups"),y=await p("testCases");function N(){const u=(x(()=>m.testResultData.toArray())||[]).reduce((r,e)=>(r[e.testId]=e,r),{}),l=j.map(r=>({title:r.data.title,slug:r.slug,tests:y.filter(e=>e.data.group.slug===r.slug).map(e=>({id:e.id,isComplete:!!(u[e.data.id]&&u[e.data.id].testName&&u[e.data.id].testResult)}))}));return console.log({grouped:l}),a.jsxs("div",{className:"bg-base-lighter padding-2",children:[a.jsx("h3",{className:"margin-top-0",children:"Your Report"}),l.map((r,e)=>a.jsx("div",{children:a.jsx(R,{group:r})},e))]})}const R=({group:n})=>{const u=n.tests.length,l=n.tests.filter(s=>s.isComplete).length,r=l/u*100,e=`progress-${g.useId()}`;return a.jsxs("div",{className:"margin-top-2",role:"progressbar","aria-labelledby":e,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r,"aria-valuetext":`${r}%`,children:[a.jsxs("div",{className:"display-flex",children:[a.jsx("div",{children:a.jsx("span",{id:e,children:a.jsx("b",{children:n.title})})}),a.jsx("div",{className:"margin-left-auto",children:a.jsxs("span",{children:[l,"/",u]})})]}),a.jsx("div",{className:"bg-white height-105 margin-top-05",children:a.jsx("div",{className:"bg-primary-dark height-105",style:{width:`${r}%`}})})]})};export{N as default};
